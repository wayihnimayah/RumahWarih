<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rumah Kalkulus</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.5.0/math.min.js"></script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background-color: #fff0f5; color: #880e4f; margin: 0; }
    header { background-color: #ffb6c1; padding: 20px; text-align: center; color: white; }
    nav { background-color: #ffe6ef; padding: 15px 20px; display: flex; justify-content: center; gap: 20px; }
    nav a { color: #d63384; text-decoration: none; font-weight: bold; }
    main { max-width: 1200px; margin: 20px auto; background-color: #ffffff; padding: 30px; border-radius: 15px; }
    section { margin-bottom: 40px; padding: 20px; border-radius: 10px; background-color: #ffebf0; }
    h2, h3 { color: #d63384; }
    .bab { border-left: 4px solid #ff69b4; padding-left: 10px; margin-bottom: 15px; }
    button { background-color: #ff69b4; color: white; padding: 10px; border: none; border-radius: 8px; cursor: pointer; margin-top: 10px; }
    .input-group input { padding: 10px; width: 100%; font-size: 16px; border-radius: 8px; border: 1px solid #ddd; margin-bottom: 10px; }
    .practice-problems { background-color: #f0f4f8; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
    .answer { display: none; margin-top: 10px; font-weight: bold; }
    .options { margin-top: 10px; }
    .option { margin: 5px 0; }
  </style>
</head>
<body>
  <header>
    <h1>Selamat Datang di Rumah Kalkulus</h1>
    <p>Belajar kalkulus dengan cara menyenangkan dan interaktif!</p>
  </header>

  <nav>
    <a href="#materi">Materi</a>
    <a href="#kalkulator">Kalkulator</a>
    <a href="#practice">Latihan</a>
    <a href="#referensi">Referensi</a>
  </nav>

  <main>
    <section id="materi">
      <h2>Materi Dasar Kalkulus</h2>
      <div class="bab">
        <h3>Bab 1: Pengantar</h3>
        <p>Kalkulus merupakan cabang matematika yang mempelajari perubahan dan gerakan. Terdiri dari dua konsep utama yaitu turunan (differential) dan integral (integral calculus). Turunan digunakan untuk menghitung laju perubahan, sedangkan integral digunakan untuk menghitung akumulasi atau luas di bawah kurva. Konsep ini sangat berguna dalam ilmu fisika, ekonomi, teknik, dan biologi.</p>
      </div>
      <div class="bab">
        <h3>Bab 2: Fungsi dan Grafik</h3>
        <p>Fungsi adalah relasi antara satu variabel dengan variabel lainnya. Grafik fungsi memvisualisasikan hubungan tersebut dan membantu dalam memahami sifat-sifat fungsi seperti kenaikan, penurunan, maksimum, minimum, dan titik belok. Jenis fungsi yang umum dibahas meliputi fungsi linear, kuadrat, eksponensial, logaritma, dan trigonometri.</p>
      </div>
      <div class="bab">
        <h3>Bab 3: Limit</h3>
        <p>Limit adalah konsep fundamental dalam kalkulus. Limit mengukur nilai yang didekati oleh fungsi saat variabel mendekati nilai tertentu. Limit digunakan dalam definisi turunan dan integral. Pemahaman limit memungkinkan kita untuk menangani fungsi yang tampak tidak terdefinisi secara langsung, serta mengevaluasi perilaku fungsi pada titik-titik kritis.</p>
      </div>
      <div class="bab">
        <h3>Bab 4: Turunan</h3>
        <p>Turunan mengukur laju perubahan dari suatu fungsi terhadap variabelnya. Didefinisikan sebagai limit dari perbandingan perubahan fungsi terhadap perubahan variabel. Turunan digunakan untuk menganalisis kecepatan, percepatan, titik maksimum dan minimum, serta kemiringan kurva. Aturan penting dalam turunan meliputi aturan rantai, aturan hasil kali, dan aturan hasil bagi.</p>
      </div>
      <div class="bab">
        <h3>Bab 5: Integral</h3>
        <p>Integral adalah kebalikan dari turunan dan digunakan untuk menghitung luas di bawah kurva fungsi. Integral memiliki dua jenis yaitu tak tentu (tanpa batas) dan tentu (dengan batas). Integral tentu digunakan untuk menghitung luas dan volume. Teknik integrasi seperti substitusi dan parsial sangat penting untuk menyelesaikan integral yang kompleks.</p>
      </div>
    </section>

<section id="kalkulator">
      <h2>🧮 Kalkulator Kalkulus Interaktif</h2>

      <div class="input-group">
        <h3>Pilih Operasi</h3>
        <select id="operationType">
          <option value="evaluate">Evaluasi (Hitung Biasa)</option>
          <option value="derivative">Turunan</option>
          <option value="integral">Integral</option>
          <option value="limit">Limit</option>
        </select>
      </div>

      <div class="input-group">
        <h3>Bangun Ekspresi</h3>
        <div id="expressionBuilder"></div>
        <input type="text" id="builtExpression" placeholder="Ekspresi seperti x^2 + 3x - 5">
      </div>

      <div class="input-group" id="limitInputGroup" style="display: none;">
        <input type="number" id="limitValue" placeholder="Nilai x mendekati... (contoh: 1)">
      </div>

      <button onclick="runCalculation()">Jalankan</button>
      <div id="calcResult" style="margin-top: 15px;"></div>

      <p><strong>Contoh:</strong> <em>x^2 + 3*x - 5</em></p>
    </section>

    <section id="practice">
      <h2>Latihan Soal Acak</h2>
      <label for="topicSelect">Pilih topik:</label>
      <select id="topicSelect">
        <option value="semua">Semua</option>
        <option value="turunan">Turunan</option>
        <option value="integral">Integral</option>
        <option value="limit">Limit</option>
      </select>
      <button onclick="generateRandomQuestion()">Tampilkan Soal Acak</button>
      <div class="practice-problems">
        <p id="randomQuestion">Klik tombol di atas untuk memulai!</p>
        <div class="options" id="randomOptions"></div>
        <p id="randomResult" class="answer"></p>
      </div>
    </section>

    <section id="referensi">
      <h2>Referensi Tambahan</h2>
      <ul>
        <li><a href="https://www.khanacademy.org/math/calculus-1" target="_blank">Khan Academy - Calculus 1</a></li>
        <li><a href="https://www.youtube.com/results?search_query=kalkulus" target="_blank">YouTube: Pencarian Video Kalkulus</a></li>
      </ul>
    </section>
  </main>

<script>
    function buildExpressionButtons() {
      const container = document.getElementById("expressionBuilder");
      const buttons = ['x', '^', '+', '-', '*', '/', '(', ')', '1','2','3','4','5','6','7','8','9','0'];
      buttons.forEach(label => {
        const btn = document.createElement("button");
        btn.textContent = label;
        btn.onclick = () => {
          document.getElementById("builtExpression").value += label;
        };
        container.appendChild(btn);
      });
      const clr = document.createElement("button");
      clr.textContent = "Hapus";
      clr.onclick = () => document.getElementById("builtExpression").value = "";
      container.appendChild(clr);
    }

    document.getElementById("builtExpression").addEventListener("keydown", function(e) {
      if (e.key === "Enter") runCalculation();
    });

    function runCalculation() {
      const expr = document.getElementById("builtExpression").value;
      const type = document.getElementById("operationType").value;
      const output = document.getElementById("calcResult");

      try {
        let result, steps = "";
        switch (type) {
          case "evaluate":
            result = math.evaluate(expr);
            steps = `Evaluasi langsung dari ekspresi: \( ${expr} \)`;
            break;
          case "derivative":
            result = math.derivative(expr, 'x').toString();
            steps = `Gunakan aturan turunan pada \( f(x) = ${expr} \), hasilnya: \( f'(x) = ${result} \)`;
            break;
          case "integral":
            result = math.integral(expr, 'x').toString();
            steps = `Gunakan aturan integral pada \( f(x) = ${expr} \), hasil: \( \int f(x)dx = ${result} + C \)`;
            break;
          case "limit":
            const x = parseFloat(document.getElementById("limitValue").value);
            const compiled = math.parse(expr).compile();
            const left = compiled.evaluate({ x: x - 0.0001 });
            const right = compiled.evaluate({ x: x + 0.0001 });
            const avg = ((left + right) / 2).toFixed(5);
            result = avg;
            steps = `Evaluasi limit kiri dan kanan dari \( f(x) = ${expr} \) saat \( x \to ${x} \): kiri = ${left.toFixed(5)}, kanan = ${right.toFixed(5)}. Rata-rata: ${avg}`;
            break;
        }
        output.innerHTML = `<p><strong>Soal:</strong> ${expr}</p><p><strong>Hasil:</strong> ${result}</p><p><strong>Langkah Pengerjaan:</strong><br>${steps}</p>`;
        MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
      } catch (e) {
        output.innerHTML = "❌ Ekspresi tidak valid atau terjadi kesalahan.";
      }
    }

    document.getElementById("operationType").addEventListener("change", () => {
      const type = document.getElementById("operationType").value;
      const limitInput = document.getElementById("limitInputGroup");
      limitInput.style.display = (type === "limit") ? "block" : "none";
    });

    buildExpressionButtons();
    
    const quizBank = [
      {
        topic: "turunan",
        question: "Turunan dari \\( f(x) = x^2 \\) adalah ...",
        options: [
          { label: "A", text: "\\( 2x \\)", correct: true },
          { label: "B", text: "\\( x^2 \\)", correct: false }
        ],
        explanation: "Turunan dari \\( x^n \\) adalah \\( nx^{n-1} \\), jadi \\( f'(x) = 2x \\)."
      },
      {
        topic: "integral",
        question: "Integral dari \\( f(x) = 3x^2 \\) adalah ...",
        options: [
          { label: "A", text: "\\( x^3 + C \\)", correct: true },
          { label: "B", text: "\\( 3x + C \\)", correct: false }
        ],
        explanation: "Integral dari \\( x^n \\) adalah \\( \\frac{x^{n+1}}{n+1} + C \\), jadi hasilnya \\( x^3 + C \\)."
      },
      {
        topic: "limit",
        question: "Limit dari \\( \\frac{x^2 - 1}{x - 1} \\) saat \\( x \\to 1 \\) adalah ...",
        options: [
          { label: "A", text: "2", correct: true },
          { label: "B", text: "Tak terdefinisi", correct: false }
        ],
        explanation: "Faktorkan: \\( \\frac{(x - 1)(x + 1)}{x - 1} \\), coret \\( x - 1 \\), sisa \\( x + 1 = 2 \\)."
      }
    ];

    function generateRandomQuestion() {
      const topic = document.getElementById("topicSelect").value;
      const filtered = topic === "semua" ? quizBank : quizBank.filter(q => q.topic === topic);
      if (filtered.length === 0) return;
      const quiz = filtered[Math.floor(Math.random() * filtered.length)];
      document.getElementById("randomQuestion").innerHTML = quiz.question;
      const optDiv = document.getElementById("randomOptions");
      optDiv.innerHTML = "";
      quiz.options.forEach((opt, i) => {
        optDiv.innerHTML += `<div class="option">
          <input type="radio" name="randomQ" id="opt${i}" value="${opt.label}">
          <label for="opt${i}">${opt.label}) ${opt.text}</label>
        </div>`;
      });
      const result = document.getElementById("randomResult");
      result.innerHTML = "";
      result.style.display = "none";
      const btn = document.createElement("button");
      btn.textContent = "Cek Jawaban";
      btn.onclick = () => {
        const selected = document.querySelector('input[name="randomQ"]:checked');
        const correct = quiz.options.find(opt => opt.correct).label;
        if (!selected) return;
        const isCorrect = selected.value === correct;
        result.innerHTML = `${isCorrect ? "✅ Benar!" : "❌ Salah."}<br><em>Penjelasan:</em> ${quiz.explanation}`;
        result.style.display = "block";
        MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
      };
      optDiv.appendChild(btn);
      MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
    }
  </script>
</body>
</html>
